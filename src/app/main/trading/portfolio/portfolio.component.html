<div class="ae-table" [class.ae-table--overflow]="primengTableHelper.totalRecordsCount != 0">
    <div class="primeng-datatable-container col-12" [busyIf]="primengTableHelper.isLoading">
        <p-table
            #dataTable
            [value]="primengTableHelper.records"
            rows="{{ primengTableHelper.defaultRecordsCountPerPage }}"
            [paginator]="false"
            [scrollable]="true"
            ScrollWidth="100%"
            [responsive]="primengTableHelper.isResponsive"
            [resizableColumns]="primengTableHelper.resizableColumns"
            [globalFilterFields]="['name', 'amount', 'total']"
        >
            <ng-template pTemplate="caption">
                <div class="ae-table__title--column flex align-items-center justify-content-end mb-4">
                    <h6 class="ae-text-dark ae-text-medium fw-bold m-0">{{ l('PortfolioTitleDescription') }}</h6>
                    <span class="p-input-icon-right ml-auto">
                        <i class="pi pi-search"></i>
                        <input
                            pInputText
                            type="text"
                            (input)="dataTable.filterGlobal($event.target.value, 'contains')"
                            placeholder=""
                        />
                    </span>
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th>
                        {{ l('Active') }}
                        <p-columnFilter type="text" field="name" display="none" class="d-none"></p-columnFilter>
                    </th>
                    <th>
                        {{ l('Graphic') }}
                    </th>
                    <th>
                        {{ l('Change24h') }}
                        <p-columnFilter type="number" field="24h" display="none" class="d-none"></p-columnFilter>
                    </th>
                    <th>
                        {{ l('TotalPercentAmount') }}
                        <p-columnFilter
                            type="number"
                            field="totalPercent"
                            display="none"
                            class="d-none"
                        ></p-columnFilter>
                    </th>
                    <th>
                        {{ l('TotalPercenProfit') }}
                        <p-columnFilter
                            type="number"
                            field="totalProfit"
                            display="none"
                            class="d-none"
                        ></p-columnFilter>
                    </th>
                    <th>
                        {{ l('Quantity') }}
                        <p-columnFilter type="number" field="amount" display="none" class="d-none"></p-columnFilter>
                    </th>
                    <th>
                        {{ l('TotalUSD') }}
                        <p-columnFilter type="number" field="total" display="none" class="d-none"></p-columnFilter>
                    </th>
                    <th style="width: 100px">
                        {{ l('Actions') }}
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-record="$implicit" let-i="rowIndex">
                <tr>
                    <td>
                        <div class="flex align-items-center">
                            <div class="mr-4">
                                <img
                                    src="/assets/crypto-icons/{{ record.key | lowercase }}.png"
                                    class="crypto-icon-table"
                                    alt="{{ record.key }}"
                                />
                            </div>
                            <div class="ae-text__coin">
                                <p class="m-0 ae-text-dark ae-text-default">{{ record.name }}</p>
                                <span class="ae-text-gris-dark ae-text-default">{{ record.key }}</span>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div *ngIf="record.changePct24Hour > 0; else isDown">
                            <img src="/assets/common/images/icon-line-up.png" alt="Monetae" />
                        </div>
                        <ng-template #isDown>
                            <img src="/assets/common/images/icon-line-down.png" alt="Monetae" />
                        </ng-template>
                    </td>
                    <td>
                        <span
                            [class.text-success]="record.changePct24Hour > 0"
                            [class.text-danger]="record.changePct24Hour < 0"
                        >
                            <span *ngIf="record.changePct24Hour > 0">
                                +{{ record.changePct24Hour | number : '1.2' : 'en' }}%
                            </span>
                            <span *ngIf="record.changePct24Hour < 0">
                                {{ record.changePct24Hour | number : '1.2' : 'en' }}%
                            </span>
                        </span>
                    </td>
                    <td class="ae-text-gris-dark ae-text-default">{{ record.totalPercent }}%</td>
                    <td class="ae-text-gris-dark ae-text-default">{{ record.profitPercent }}%</td>
                    <td class="ae-text-gris-dark ae-text-default">
                        {{ record.quantity | number : '1.0-6' : 'en' }}
                    </td>
                    <td class="ae-text-gris-dark ae-text-default">
                        {{ record.amount | currency : 'USD' : 'symbol' : '1.2-5' : 'en' }}
                    </td>
                    <td class="text-center">
                        <div class="flex align-items-center justify-content-center">
                            <i
                                class="pi pi-ellipsis-v ae-cursor-pointer"
                                (click)="selectedRecord = record.tradingCryptoCurrencyId; menu.toggle($event)"
                            ></i>
                            <p-menu #menu [model]="itemsMenu" [popup]="true" class="ae-menuoptions"></p-menu>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <div class="primeng-no-data" *ngIf="primengTableHelper.totalRecordsCount == 0">
            {{ l('NoData') }}
        </div>
        <div
            class="ae-paginator primeng-paging-container flex align-items-center justify-content-center"
            [class.ae-paginator--top]="primengTableHelper.totalRecordsCount != 0"
            hidden="{{ primengTableHelper.totalRecordsCount == 0 }}"
        >
            <p-paginator
                [rows]="primengTableHelper.defaultRecordsCountPerPage"
                #paginator
                (onPageChange)="getAllMemberPortfolioRequests($event)"
                [totalRecords]="primengTableHelper.totalRecordsCount"
                [showCurrentPageReport]="false"
            ></p-paginator>
        </div>
    </div>
</div>
