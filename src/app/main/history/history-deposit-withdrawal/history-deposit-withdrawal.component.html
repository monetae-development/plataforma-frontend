<div class="ae-table">
    <div class="primeng-datatable-container col-12" [busyIf]="primengTableHelper.isLoading">
        <p-table
            #dataTable
            (onLazyLoad)="getAllMemberRequests($event)"
            [value]="primengTableHelper.records"
            rows="{{ primengTableHelper.defaultRecordsCountPerPage }}"
            selectionMode="single"
            [paginator]="false"
            [lazy]="true"
            [scrollable]="true"
            ScrollWidth="100%"
            [responsive]="primengTableHelper.isResponsive"
            [resizableColumns]="primengTableHelper.resizableColumns"
        >
            <ng-template pTemplate="header">
                <tr>
                    <th>
                        {{ l('Date') }}
                    </th>
                    <th>
                        {{ l('Folio') }}
                    </th>
                    <th>
                        {{ l('Reference') }}
                    </th>
                    <th>
                        {{ l('Type') }}
                    </th>
                    <th>
                        {{ l('Amount') }}
                    </th>
                    <th>
                        {{ l('Status') }}
                    </th>
                    <th class="text-center">
                        {{ l('Actions') }}
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-record="$implicit" let-i="rowIndex">
                <tr>
                    <td class="text-center">
                        <span class="fs-6">
                            {{ getDateFormat(record.request.creationTime) }}
                        </span>
                        <br />
                        <span class="fs-7">
                            {{ getTimeFormat(record.request.creationTime) }}
                        </span>
                    </td>
                    <td class="ae-text-gris-dark ae-text-default">
                        {{ record.request.folio }}
                    </td>
                    <td class="ae-text-gris-dark ae-text-default">
                        {{ record.request.reference }}
                        <span *ngIf="!record.request.reference">N/A</span>
                    </td>
                    <td class="ae-text-gris-dark ae-text-default">
                        <span class="badge text-bg-secondary">
                            {{ l(requestType[record.request.type]) }}
                        </span>
                    </td>
                    <td class="ae-text-gris-dark ae-text-default">
                        {{ record.request.amount | currency : 'USD' : 'symbol' : '1.2-5' : 'en' }}
                    </td>
                    <td
                        class="ae-text-primary"
                        [class.ae-text-success]="record.request.status === fiatStatus.Approved"
                        [class.ae-text-danger]="record.request.status === fiatStatus.Refused"
                    >
                        {{ l(fiatStatus[record.request.status]) }}
                    </td>
                    <td class="text-center">
                        <i
                            class="pi pi-search ae-cursor-pointer"
                            tooltip="{{ 'View' | localize }}"
                            (click)="selectRow(record.request)"
                        ></i>
                    </td>
                </tr>
            </ng-template>
        </p-table>
        <div class="primeng-no-data" *ngIf="primengTableHelper.totalRecordsCount == 0">
            {{ l('NoData') }}
        </div>
        <div class="ae-paginator primeng-paging-container flex align-items-center justify-content-center">
            <p-paginator
                [rows]="primengTableHelper.defaultRecordsCountPerPage"
                #paginator
                (onPageChange)="getAllMemberRequests($event)"
                [totalRecords]="primengTableHelper.totalRecordsCount"
                [showCurrentPageReport]="false"
            ></p-paginator>
        </div>
    </div>
</div>
