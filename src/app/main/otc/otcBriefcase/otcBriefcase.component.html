<div class="ae-table"
    [class.ae-table--overflow]="primengTableHelper.totalRecordsCount != 0">
    <div class="primeng-datatable-container col-12" [busyIf]="primengTableHelper.isLoading">
      <p-table
        #dataTable
        (onLazyLoad)="getAllMemberPortfolioRequests($event)"
        [value]="primengTableHelper.records"
        rows="{{ primengTableHelper.defaultRecordsCountPerPage }}"
        [paginator]="false"
        [lazy]="true"
        [scrollable]="true"
        ScrollWidth="100%"
        [responsive]="primengTableHelper.isResponsive"
        [resizableColumns]="primengTableHelper.resizableColumns"
        [globalFilterFields]="['cryptoCurrency.name', 'cryptoCurrency.key', 'request.cost', 'request.totalPercent']"
      >
        <ng-template pTemplate="caption">
          <div class="ae-table__title--column flex align-items-center justify-content-end mb-4">
              <h6 class="ae-text-dark ae-text-medium fw-bold m-0">{{ l('Aquí tienes el registro de todos tus activos digitales') }}</h6>
              <span class="p-input-icon-right ml-auto">
                  <i class="pi pi-search"></i>
                  <input pInputText type="text" (input)="dataTable.filterGlobal($event.target.value, 'contains')" placeholder="" />
              </span>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th>
                {{ l('Active') }}
            </th>
            <th>
                {{ l('Gráfico') }}
            </th>
            <th>
                {{ l('Change24h') }}
            </th>
            <th>
                {{ l('% rent.') }}
            </th>
            <th>
                {{ l('Cantidad') }}
            </th>
            <th style="width: 100px;">
              {{ l('Actions') }}
            </th>
        </tr>
        </ng-template>
        <ng-template pTemplate="body" let-record="$implicit" let-i="rowIndex">
          <tr>
            <td>
              <div class="flex align-items-center">
                <div class="mr-4">
                    <img
                        src="/assets/crypto-icons/{{ record.cryptoCurrency.key | lowercase }}.png"
                        class="crypto-icon-table"
                        alt="{{ record.cryptoCurrency.key }}"
                    />
                </div>
                <div class="ae-text__coin">
                    <p class="m-0 ae-text-dark ae-text-default">{{ record.cryptoCurrency.name }}</p>
                    <span class="ae-text-gris-dark ae-text-default">{{ record.cryptoCurrency.key }}</span>
                </div>
              </div>
            </td>
            <td>
              <div *ngIf="record.request.percent24H > 0; else isDown">
                  <img src="/assets/common/images/icon-line-up.png" alt="Monetae">
                </div>
                <ng-template #isDown>
                  <img src="/assets/common/images/icon-line-down.png" alt="Monetae">
                </ng-template>
            </td>
            <td
              [class.text-success]="record.request.percent24H > 0"
              [class.text-danger]="record.request.percent24H < 0"
            >
              <span class="ae-text-gris-dark">{{ record.request.percent24H | number : '1.2' : 'en'  }}%</span>
            </td>
            <td class="ae-text-gris-dark ae-text-default">
              {{ record.request.totalPercent }}%
            </td>
            <td class="ae-text-gris-dark ae-text-default">
              {{ record.request.cost | number : '1.0-6' : 'en' }}
            </td>
            <td class="text-center">
                <div class="flex align-items-center justify-content-center">
                    <i class="pi pi-ellipsis-v ae-cursor-pointer" (click)="menu.toggle($event)"></i>
                    <p-menu #menu [model]="itemsMenu" [popup]="true" class="ae-menuoptions"></p-menu>
                </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
      <div class="primeng-no-data" *ngIf="primengTableHelper.totalRecordsCount == 0">
        {{ l('NoData') }}
      </div>
      <div class="ae-paginator primeng-paging-container flex align-items-center justify-content-center"
          [class.ae-paginator--top]="primengTableHelper.totalRecordsCount != 0">
          <p-paginator
              [rows]="primengTableHelper.defaultRecordsCountPerPage"
              #paginator
              (onPageChange)="getAllMemberPortfolioRequests($event)"
              [totalRecords]="primengTableHelper.totalRecordsCount"
              [showCurrentPageReport]="false"
          ></p-paginator>
      </div>
    </div>
  </div>