<div class="ae-tabs">
  <p-tabMenu
      [model]="menuItems"
      [activeItem]="activeItem"
      (activeItemChange)="onActiveItemChange($event)"
  ></p-tabMenu>
</div>
<div class="ae-tabs__container" *ngIf="activeItem.label == 'Enviar'">
  <div class="ae-tabs__container--content">
    <p class="ae-text-dark ae-text-default">Registre la siguiente información para realizar una solicitud de envió.</p>
    <form [formGroup]="receiveForm">
      <div class="ae-select">
        <label class="mb-3">{{ l('Seleccionar activo') }}</label>
        <p-dropdown
            [disabled]="!started || processing"
            [options]="cryptoAssets"
            optionLabel="label"
            [formControl]="cryptoAssetIdControl"
            placeholder="{{ l('SelectTreeDots') }}"
            [showClear]="true"
            [filter]="true"
            (onChange)="onChangeCurrency($event)"
            (onClear)="onReset()"
            required
        >
            <ng-template pTemplate="selectedItem">
                <div class="flex align-items-center" *ngIf="cryptoAssetIdControl">
                    <div class="mr-3">
                        <img
                          src="/assets/crypto-icons/{{ cryptoAssetIdControl.value?.subtitle.toLowerCase() }}.png" 
                          style="width: 28px"
                        />
                    </div>
                    <div class="flex align-items-center">
                        <span class="mr-2">{{ cryptoAssetIdControl.value?.label }}</span>
                        <span>{{ cryptoAssetIdControl.value?.subtitle }}</span>
                    </div>
                </div>
            </ng-template>
            <ng-template let-coin pTemplate="item">
                <div class="d-flex align-items-center">
                    <div class="mr-3">
                        <img 
                          src="/assets/crypto-icons/{{ coin.subtitle.toLowerCase() }}.png" 
                          style="width: 28px"/>
                    </div>
                    <div class="flex flex-column">
                        <span>{{ coin.label }}</span>
                        <span>{{ coin.subtitle }}</span>
                    </div>
                </div>
            </ng-template>
        </p-dropdown>
        <!-- <validation-messages [formCtrl]="cryptoAssetIdControl"></validation-messages> -->
      </div>
      <div class="ae-input">
        <label htmlFor="address">{{ l('Enviar a / Direccion de wallet') }}</label>
        <input 
          id="address" 
          name="address" 
          type="text" 
          class="form-control m-input" 
          pInputText
          [formControl]="addressControl"
        />
      </div>
      <div class="ae-select">
        <label class="mb-3">{{ l('Seleccionar red') }}</label>
        <p-dropdown
            [disabled]="!started || processing"
            [options]="blockchainNetwortks"
            optionLabel="label"
            [formControl]="blockchainNetworkIdControl"
            placeholder="{{ l('SelectTreeDots') }}"
            [showClear]="true"
            [filter]="true"
            (onChange)="onChangeCurrency($event)"
            (onClear)="onReset()"
            required
        >
            <ng-template pTemplate="selectedItem">
                <div class="flex align-items-center" *ngIf="blockchainNetworkIdControl">
                    <div class="mr-3">
                        <img
                          src="/assets/crypto-icons/{{ blockchainNetworkIdControl.value?.subtitle.toLowerCase() }}.png" 
                          style="width: 28px"
                        />
                    </div>
                    <div class="flex align-items-center">
                      <span class="mr-2">{{ blockchainNetworkIdControl.value?.label }}</span>
                      <span>{{ blockchainNetworkIdControl.value?.subtitle }}</span>
                    </div>
                </div>
            </ng-template>
            <ng-template let-coin pTemplate="item">
                <div class="flex align-items-center">
                    <div class="mr-3">
                        <img 
                          src="/assets/crypto-icons/{{ coin.subtitle.toLowerCase() }}.png" 
                          style="width: 28px"/>
                    </div>
                    <div class="flex flex-column">
                      <span>{{ coin.label }}</span>
                      <span>{{ coin.subtitle }}</span>
                    </div>
                </div>
            </ng-template>
        </p-dropdown>
      </div>
      <div class="ae-inputnumber">
        <label htmlFor="amount">{{ l('Ingresar cantidad') }}</label>
        <p-inputNumber
            name="amount"
            [formControl]="amountControl"
            mode="decimal"
            locale="en-US"
            [minFractionDigits]="0"
            [maxFractionDigits]="9"
            [min]="0"
            [max]="30"
            required
        ></p-inputNumber>
        <small class="ae-text-gris-dark ae-text-small">{{ l('Saldo disponible:') }} {{ amount }} </small>
      </div>
    </form>
    <small class="ae-text-gris-dark ae-text-small fw-normal">Por favor, asegúrate de elegir la criptomoneda y red correcta al realizar una transacción.
      Si envías criptomonedas a una dirección equivocada, podrías perder tus activos.</small>
  </div>
  <div class="ae-tabs__container--actions">
    <p-button label="Cancelar" class="ae-button ae-button--default" (click)="onCancel()"></p-button>
    <p-button label="Continuar" class="ae-button ae-button--primary" [disabled]="!receiveForm.valid" (click)="onContinue()"></p-button>
  </div>
</div>
<div class="ae-tabs__container" *ngIf="activeItem.label == 'Recibir'">
  <div class="ae-tabs__container--content">
    <p class="ae-text-dark ae-text-default">Registre la siguiente información para realizar una solicitud de recibida.</p>
  </div>
  <div class="ae-tabs__container--actions">
    <p-button label="Cancelar" class="ae-button ae-button--default" (click)="onCancel()"></p-button>
    <p-button label="Generar QR" class="ae-button ae-button--primary" (click)="onReceive()"></p-button>
  </div>
</div>