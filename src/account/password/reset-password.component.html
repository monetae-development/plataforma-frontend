<div class="login-form" [@routerTransition]>
    <button
        [disabled]="saving"
        routerLink="/account/login"
        type="button"
        class="ae-btn ae-btn--transparent ae-button--back fw-bolder"
    >
        <i class="ae-text-black pi pi-arrow-left"></i>
        <span>{{ 'Back' | localize }}</span>
    </button>
    <div class="ae-login__title">
        <h3 class="fw-bold ae-text-dark mb-7">{{ 'ChangePassword' | localize }}</h3>
    </div>
    <form #resetPassForm="ngForm" class="login-form form" method="post" (ngSubmit)="save()">
        <div class="ae-input mb-5">
            <label>Nueva contraseña *</label>
            <input
                type="password"
                name="Password"
                class="form-control"
                [(ngModel)]="model.password"
                #Password="ngModel"
                placeholder="Nueva contraseña"
                validateEqual="PasswordRepeat"
                reverse="true"
                [requireDigit]="passwordComplexitySetting.requireDigit"
                [requireLowercase]="passwordComplexitySetting.requireLowercase"
                [requireUppercase]="passwordComplexitySetting.requireUppercase"
                [requireNonAlphanumeric]="passwordComplexitySetting.requireNonAlphanumeric"
                [requiredLength]="passwordComplexitySetting.requiredLength"
                required
            />
        </div>
        <div [hidden]="resetPassForm.form.valid || resetPassForm.form.pristine" class="mb-5">
            <ul class="form-text text-danger" *ngIf="Password.errors">
                <li [hidden]="!Password.errors.requireDigit">
                    {{ 'PasswordComplexity_RequireDigit_Hint' | localize }}
                </li>
                <li [hidden]="!Password.errors.requireLowercase">
                    {{ 'PasswordComplexity_RequireLowercase_Hint' | localize }}
                </li>
                <li [hidden]="!Password.errors.requireUppercase">
                    {{ 'PasswordComplexity_RequireUppercase_Hint' | localize }}
                </li>
                <li [hidden]="!Password.errors.requireNonAlphanumeric">
                    {{ 'PasswordComplexity_RequireNonAlphanumeric_Hint' | localize }}
                </li>
                <li [hidden]="!Password.errors.requiredLength">
                    {{ 'PasswordComplexity_RequiredLength_Hint' | localize : passwordComplexitySetting.requiredLength }}
                </li>
            </ul>
        </div>
        <div class="ae-input">
            <label>Repetir nueva contraseña *</label>
            <input
                type="password"
                name="PasswordRepeat"
                class="form-control"
                [ngModel]="model.passwordRepeat"
                #PasswordRepeat="ngModel"
                placeholder="Repetir nueva contraseña"
                validateEqual="Password"
                reverse="false"
                [requireDigit]="passwordComplexitySetting.requireDigit"
                [requireLowercase]="passwordComplexitySetting.requireLowercase"
                [requireUppercase]="passwordComplexitySetting.requireUppercase"
                [requireNonAlphanumeric]="passwordComplexitySetting.requireNonAlphanumeric"
                [requiredLength]="passwordComplexitySetting.requiredLength"
                required
            />
        </div>
        <div [hidden]="resetPassForm.form.valid || resetPassForm.form.pristine" class="mb-5">
            <ul class="form-text text-danger" *ngIf="PasswordRepeat.errors">
                <li [hidden]="!PasswordRepeat.errors.requireDigit">
                    {{ 'PasswordComplexity_RequireDigit_Hint' | localize }}
                </li>
                <li [hidden]="!PasswordRepeat.errors.requireLowercase">
                    {{ 'PasswordComplexity_RequireLowercase_Hint' | localize }}
                </li>
                <li [hidden]="!PasswordRepeat.errors.requireUppercase">
                    {{ 'PasswordComplexity_RequireUppercase_Hint' | localize }}
                </li>
                <li [hidden]="!PasswordRepeat.errors.requireNonAlphanumeric">
                    {{ 'PasswordComplexity_RequireNonAlphanumeric_Hint' | localize }}
                </li>
                <li [hidden]="!PasswordRepeat.errors.requiredLength">
                    {{ 'PasswordComplexity_RequiredLength_Hint' | localize : passwordComplexitySetting.requiredLength }}
                </li>
                <li [hidden]="PasswordRepeat.valid">{{ 'PasswordsDontMatch' | localize }}</li>
            </ul>
        </div>
        <div class="ae-login__actions pb-lg-0 pb-5 mt-15">
            <button
                type="submit"
                class="ae-btn ae-btn--primary w-full fw-bolder fs-h6"
                [disabled]="!resetPassForm.form.valid"
                [buttonBusy]="saving"
                [busyText]="l('SavingWithThreeDot')"
            >
                {{ 'Next2' | localize }}
            </button>
        </div>
    </form>
</div>
